# Racks
**Racks** – это прототип системы учета используемого пространства для телекоммуникационных шкафов и стоек.  

| ![racks-2](https://user-images.githubusercontent.com/96002587/153870677-6e4d54c7-64bc-4cd6-9b19-26ad7342f209.jpg) |
|:--:| 
| *Карта стоек* |

| ![units-2](https://user-images.githubusercontent.com/96002587/153870693-b069f4c2-a5c7-43cd-b6de-c17c8543e5d3.jpg) |
|:--:| 
| *Схема стойки* |

**Стек:**
- Python 3.6.9
- Django 2.2.2
- Gunicorn 19.9.0
- PostgreSQL 10.18

# Функционал
Прототип системы представляет из себя набор форм для внесения данных, разбавленный некоторым кол-вом костылей для их корректного отображения виде схем стоек. Пользовательский интерфейс выполнен с учетом минимальных требований функциональности (нет верстки, jQuery, не стал даже bootstraпить). На главной странице формируется дерево стоек, отображающее их территориальное расположение. Там же можно добавить необходимые объекты для добавления стойки. После создания стойки в нее можно добавить устройства, либо обозначить юниты как зарезервированные или недоступные для использования. Предусмотрены несколько стилей отображения занятых юнитов. Устройства, находящиеся в зоне ответственности организации или общей структуры над отделами окрашиваются в зеленый цвет, вне этой зоны – в красный (к примеру, оборудование операторов связи у которых организация арендует канал). Устройства (или юниты) имеющие статус отличный от “Оборудование в работе”, отмечаются штрихованной линией. Если устройство резервируется, можно указать порядковый номер резерва при заполнении формы в соответствующем поле, который будет отображаться в карточке устройства как ссылка. Для упрощения рутинной работы персонала на местах предусмотрены шаблоны для печати обеих сторон стойки. В такой шаблон можно внести основные данные, как в черновик на месте описи стойки и в последующем перенести в систему. Так же предусмотрена выгрузка сводных отчетов включающих все стойки и всё оборудование, внесенное в систему. В обоих отчетах есть поле со ссылкой на карточку устройства или стойки. Для удобстава инвентаризации предусмотрена генерация QR-кодов (по требованию, сквозная нумерация, пути не хранятся в БД). Можно распечатать сразу все коды для стойки и установленных в ней устройств. 

| ![device-2](https://user-images.githubusercontent.com/96002587/153870705-293ddfe6-3bf6-489d-9341-fe254c16a6ed.jpg) |
|:--:| 
| *Карточка устройства* |

# Особенности
Большинство существующих решений с похожим функционалом имеют стандартные опции в рамках разделения прав пользователей и рассчитаны на то, что все данные будут вноситься, удаляться и изменяться администраторами. Это не позволяет безопасно использовать подобные системы, если технические специалисты на местах (территориально) не обладают достаточной квалификацией и могут удалить данные вне зоны своей ответственности. Данная проблема решена максимально примитивно, за счет простой схемы БД и проверки первичных ключей для каждого изменяемого объекта. Таким образом, реализовано некоторое подобие механизма горизонтальных прав «в инвалидном кресле», которое позволяет запрещать или разрешать изменения для объектов в рамках одной и той же модели. Для того чтобы пользователь мог работать только в пределах зоны ответственности своего отдела, необходимо создать группу с названием отдела и добавить его в эту группу. * *Примечание: при создании пользователя обязательно указывать First name и Last name в Personal info.* * Для надежности предусмотрено логирование и добавлен простой скрипт `pg_backup.sh` для бэкапов БД.

# Selenium тесты
Функциональные тесты написаны под уже существующий сетап. Для проверки соответсвия сетапа предусмотрены предварительные тесты 1_1 - 1_7. В сетап входит тестовый пользователь `selenium` с правами на изменение объектов в зоне ответственности одного из отделов.

